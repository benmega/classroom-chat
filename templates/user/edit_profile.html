<!--
File: edit_profile.html
Type: html
Summary: Template for editing user profile info, skills, and projects.
-->

{% extends 'base.html' %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/edit_profile.css') }}">

<div class="edit-profile-container">
    <h1>Edit Profile</h1>
    <form method="POST" action="{{ url_for('user.edit_profile') }}" enctype="multipart/form-data">
         <!-- Hidden Username Field (for accessibility) -->
        <input type="text" name="username" value="{{ user.username }}" style="display:none;" autocomplete="username">


        <!-- Profile Picture Upload -->
        <div class="form-group">
            <label for="profile_picture">Profile Picture:</label>
            <input type="file" id="profile_picture" name="profile_picture" accept="image/*">
        </div>

        <!-- Password Section -->
        <div class="form-group">
            <label for="password">Password:</label>
            <div class="password-container">
                <input
                    type="password"
                    id="password"
                    name="password"
                    placeholder="Leave blank to keep current password"
                    autocomplete="new-password">
                <button type="button" class="toggle-password" data-target="password">
                    üëÅÔ∏è
                </button>
            </div>
        </div>

        <div class="form-group">
            <label for="confirm_password">Confirm Password:</label>
            <div class="password-container">
                <input
                    type="password"
                    id="confirm_password"
                    name="confirm_password"
                    placeholder="Re-enter the password"
                    autocomplete="new-password">
                <button type="button" class="toggle-password" data-target="confirm_password">
                    üëÅÔ∏è
                </button>
            </div>
        </div>

        <!-- IP Address Field -->
        <div class="form-group">
            <label for="ip_address">IP Address:</label>
            <input type="text" id="ip_address" name="ip_address" value="{{ user.ip_address }}">
        </div>

        <!-- Online Status Field -->
        <div class="form-group">
            <label for="is_online">Online Status:</label>
            <select id="is_online" name="is_online">
                <option value="true" {% if user.is_online %}selected{% endif %}>Online</option>
                <option value="false" {% if not user.is_online %}selected{% endif %}>Offline</option>
            </select>
        </div>

        <!-- Skills Section -->
        <div class="form-group">
            <label for="skills">Skills:</label>
            <div id="skills-container">
                {% for skill in user.skills %}
                <div class="skill-entry">
                    <input type="text" name="skills[]" value="{{ skill.name }}">
                    <button type="button" class="remove-skill">Remove</button>
                </div>
                {% endfor %}
            </div>
            <button type="button" id="add-skill">Add Skill</button>
        </div>

        <!-- Projects Section -->
        <div class="form-group">
            <label for="projects">Projects:</label>
            <div id="projects-container">
                {% for project in user.projects %}
                <div class="project-entry">
                    <input type="text" name="project_names[]" value="{{ project.name }}" placeholder="Project Name">
                    <input type="text" name="project_descriptions[]" value="{{ project.description }}" placeholder="Project Description">
                    <input type="text" name="project_links[]" value="{{ project.link }}" placeholder="Project Link">
                    <button type="button" class="remove-project">Remove</button>
                </div>
                {% endfor %}
            </div>
            <button type="button" id="add-project">Add Project</button>
        </div>

        <!-- Submit and Cancel Buttons -->
        <div class="form-group">
            <button type="submit" class="btn-save">Save Changes</button>
            <a href="{{ url_for('user.profile') }}" class="btn-cancel">Cancel</a>
        </div>
    </form>
</div>

<script src="{{ url_for('static', filename='js/users/edit_profile.js') }}"></script>

{% endblock %}
