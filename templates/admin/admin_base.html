<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Admin Panel - Classroom Chat{% endblock %}</title>

    <link rel="icon" href="{{ url_for('static', filename='images/logo.ico') }}" type="image/x-icon">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/4.6.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    {% block head_css %}{% endblock %}
    {% block head %}{% endblock %}

    <link rel="stylesheet" href="/static/css/variables.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/admin.css') }}">

    <style>
        /* Custom tweaks for the profile image in the bootstrap navbar */
        .profile-menu_img {
            width: 40px; height: 40px; border-radius: 50%; object-fit: cover; border: 2px solid rgba(255,255,255,0.2);
        }
        /* Ensure dropdown aligns correctly */
        .dropdown-menu {
            margin-top: 10px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            border: none;
        }
        .dropdown-item {
            padding: 10px 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .dropdown-item i { opacity: 0.7; }
        .dropdown-item:active { background-color: var(--primary-color); }

        /* Mobile spacing for nav buttons */
        @media (max-width: 991px) {
            .navbar-nav .nav-item {
                margin-bottom: 10px;
            }
            .admin-nav-button {
                display: block;
                text-align: center;
                width: 100%;
            }
        }
    </style>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/4.6.2/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js"></script>
</head>
<body class="admin-body">
    <header class="admin-header">
    <div class="header-container">
        <nav class="navbar navbar-expand-lg navbar-dark p-0">

            <a class="navbar-brand font-weight-bold" href="{{ url_for('admin.dashboard') }}">
                Admin Dashboard
            </a>

            <div class="navbar-collapse" id="adminNavbar">
                <ul class="navbar-nav ml-auto align-items-lg-center">

                    {% if user %}
                        {% set pfp_filename = user.profile_picture if user.profile_picture else 'Default_pfp.jpg' %}
                        {% set pfp_url = url_for('user.profile_picture', filename=pfp_filename) %}

                        <li class="nav-item dropdown">
                            <a class="nav-link p-0 ml-lg-3" href="#" id="profileDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <img src="{{ pfp_url }}" alt="Profile" class="profile-menu_img">
                            </a>
                            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="profileDropdown">
                                <a class="dropdown-item" href="{{ url_for('admin.pending_trades') }}">Pending Trades</a>
                                <a class="dropdown-item" href="{{ url_for('admin.manage_projects') }}">Manage Projects</a>
                                <a class="dropdown-item" href="{{ url_for('achievements.add_achievement') }}">Add Achievement</a>
                                <a class="dropdown-item" href="{{ url_for('achievements.admin_certificates') }}">Certificates</a>
                                <a class="dropdown-item" href="{{ url_for('admin.documents_manager') }}">Documents</a>
                                <a class="dropdown-item" href="{{ url_for('admin_advanced.index') }}">Advanced Panel</a>

                                <div class="dropdown-divider"></div>

                                <a class="dropdown-item" href="{{ url_for('general.index') }}">
                                    <i class="bi bi-house-door"></i> Back to Site
                                </a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="{{ url_for('user.logout') }}">
                                    <i class="bi bi-box-arrow-right"></i> Logout
                                </a>
                            </div>
                        </li>
                    {% else %}
                        <li class="nav-item">
                            <a class="nav-link admin-nav-button logout" href="{{ url_for('user.logout') }}">Logout</a>
                        </li>
                    {% endif %}
                </ul>
            </div>
        </nav>
    </div>
</header>

    <main class="admin-main">
        {% block body %}
            {% block content %}{% endblock %}
        {% endblock %}
    </main>

    <footer class="admin-footer">
        <p>&copy; 2025 Classroom Chat Admin. All Rights Reserved.</p>
    </footer>

    {% block tail %}{% endblock %}
</body>
</html>